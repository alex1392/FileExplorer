<Page x:Class="FileExplorer.Views.FolderPage"
			xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			xmlns:local="clr-namespace:FileExplorer.Views"
			xmlns:converter="clr-namespace:FileExplorer.Views.Converters"
			xmlns:model="clr-namespace:FileExplorer.Models"
			xmlns:vm="clr-namespace:FileExplorer.ViewModels"
			xmlns:util="clr-namespace:FileExplorer.Utilities"
			mc:Ignorable="d"
			d:DataContext="{d:DesignInstance Type=vm:FolderPageViewModel, IsDesignTimeCreatable=True}"
			d:DesignHeight="450"
			d:DesignWidth="800"
			Title="{Binding Title}">
	<Page.Resources>
		<GridView x:Key="GridViewKey">
			<GridViewColumn Header="Name"
											Width="Auto"
											util:GridViewSort.PropertyName="Name">
				<GridViewColumn.CellTemplate>
					<DataTemplate DataType="{x:Type model:Item}">
						<StackPanel Orientation="Horizontal">
							<Image Source="{Binding .,Converter={converter:IconConverter}}"
										 Width="18" />
							<TextBlock Text="{Binding Name}"
												 VerticalAlignment="Center"
												 Margin="3" />
						</StackPanel>
					</DataTemplate>
				</GridViewColumn.CellTemplate>
			</GridViewColumn>
			<GridViewColumn Header="Date"
											Width="Auto"
											DisplayMemberBinding="{Binding LastModifiedTime, Converter={converter:TimeConverter}}"
											util:GridViewSort.PropertyName="LastModifiedTime" />
			<GridViewColumn Header="Type"
											Width="Auto"
											DisplayMemberBinding="{Binding TypeDescription}"
											util:GridViewSort.PropertyName="TypeDescription" />
			<GridViewColumn Header="Size"
											Width="Auto"
											util:GridViewSort.PropertyName="Size">
				<GridViewColumn.CellTemplate>
					<DataTemplate DataType="{x:Type model:ListFileItem}">
						<TextBlock Text="{Binding Size, Converter={converter:SizeConverter}}"
											 TextAlignment="Right" />
					</DataTemplate>
				</GridViewColumn.CellTemplate>
			</GridViewColumn>
		</GridView>
	</Page.Resources>
	<Grid>
		<ListView Name="ItemsListView"
							ItemsSource="{Binding ListItems}"
							View="{StaticResource GridViewKey}"
							util:GridViewSort.AutoSort="True"
							VirtualizingPanel.IsVirtualizingWhenGrouping="True">
			<ListView.ItemContainerStyle>
				<Style TargetType="ListViewItem">
					<EventSetter Event="MouseDoubleClick"
											 Handler="ListViewItem_MouseDoubleClick" />
					<Setter Property="HorizontalContentAlignment"
									Value="Stretch" />
				</Style>
			</ListView.ItemContainerStyle>
			<ListView.GroupStyle>
				<GroupStyle>
					<GroupStyle.ContainerStyle>
						<Style TargetType="{x:Type GroupItem}">
							<Setter Property="Template">
								<Setter.Value>
									<ControlTemplate>
										<Expander IsExpanded="True">
											<Expander.Header>
												<StackPanel Orientation="Horizontal">
													<TextBlock Text="{Binding Name}"
																		 FontWeight="Bold"
																		 Foreground="Gray"
																		 FontSize="22"
																		 VerticalAlignment="Bottom" />
													<TextBlock Text="{Binding ItemCount}"
																		 FontSize="22"
																		 Foreground="Green"
																		 FontWeight="Bold"
																		 FontStyle="Italic"
																		 Margin="10,0,0,0"
																		 VerticalAlignment="Bottom" />
													<TextBlock Text=" item(s)"
																		 FontSize="22"
																		 Foreground="Silver"
																		 FontStyle="Italic"
																		 VerticalAlignment="Bottom" />
												</StackPanel>
											</Expander.Header>
											<ItemsPresenter />
										</Expander>
									</ControlTemplate>
								</Setter.Value>
							</Setter>
						</Style>
					</GroupStyle.ContainerStyle>
				</GroupStyle>
			</ListView.GroupStyle>
		</ListView>
	</Grid>
</Page>